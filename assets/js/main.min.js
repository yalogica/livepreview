!function(C){"use strict";C(document).ready(function(){var a=livepreviewpro_globals,d=window.History,h=[],i=null,o=null,s=null,r=1;function l(a,t,e){var d=C("#product-list"),i=C("#pagination"),o=null,s=0;d.empty();for(var r=0;r<h.length;r++){var l=C("<div>").addClass("col-xs-6 col-sm-3"),n=h[r],c=n.data("product");(null==a||"*"==a||null!=c.tag&&c.tag.toLowerCase()==a.toLowerCase())&&((null==t||"*"==t||null!=c.year&&c.year==t)&&(!e||null!=c.title&&-1!=c.title.toLowerCase().indexOf(e.toLowerCase())||null!=c.tag&&-1!=c.tag.toLowerCase().indexOf(e.toLowerCase()))&&(s%4==0&&(d.append(o),o=C("<div>").addClass("row")),o.append(l.append(n)),s++))}d.append(o),C("#filters a.active").removeClass("active"),C('#filters a[data-tag="'+a+'"]').addClass("active"),C('#filters a[data-year="'+t+'"]').addClass("active");var p=C("#filters a.active").closest(".has-child");p.length&&p.find("> a").addClass("active"),i.empty();var u=d.find(".row"),v=C("<ul>"),f=C("<li>").addClass("nav prev").attr("data-page","prev").append(C("<a>").attr("href","#").append(C("<i></i>").addClass("fa fa-angle-left"))),g=C("<li>").addClass("nav next").attr("data-page","next").append(C("<a>").attr("href","#").append(C("<i></i>").addClass("fa fa-angle-right")));u.length<=1||(v.append(f),u.each(function(a,t){var e=C("<li>").addClass("hidden-xs").attr("data-page",a+1).append(C("<a>").attr("href","#").text(a+1));v.append(e)}),v.append(g),i.append(v))}function n(d){C("#product-list .row").removeClass("active show").each(function(a,t){if(a+1==d){var e=C(t);return e.addClass("active"),e.get(0).offsetHeight,e.addClass("show"),e.find(".product img").lazyload(),!1}}),C("#pagination li").removeClass("active"),C('#pagination li[data-page="'+d+'"]').addClass("active"),C("#product-list .title span").ellipsis({row:2})}function t(a){var t=C("#iframe");a=a||"desktop";C("#product-devices a.active").removeClass("active"),C('#product-devices a[data-device="'+a+'"]').addClass("active"),"desktop"==a?t.removeClass("border"):t.addClass("border"),t.removeClass("desktop tabletlandscape tabletportrait mobilelandscape mobileportrait").addClass(a)}function e(e){!function(a){if(a&&(a.preload?C("body").removeClass("iframe-loaded"):C("body").addClass("iframe-loaded"),C("#product-name").text(a.title),C("#iframe")[0].contentWindow.location.replace(a.url),C("#product-frame-close").attr("href",a.url),C("#buy").attr("href",a.buy).css({display:a.buy?"":"none"}),d.enabled&&e)){var t=C.query.set("product_id",a.id);d.pushState({product_id:a.id},null,t.toString())}}(C("#product-list .product.active").data("product"))}function c(){var a=C("#product-toggle");a.toggleClass("active"),a.hasClass("active")?(C("body").addClass("products-active"),C("#product-list .title span").ellipsis({row:2})):C("body").removeClass("products-active")}function p(){C("#filters li.dropdown").removeClass("dropdown")}C("#product-list .product").each(function(a,t){var e=C(t);e.detach(),h.push(e),e.hasClass("active")&&(r=Math.floor(a/4)+1)}),C("#product-toggle").on("click",function(){c()}),C("#product-devices a").on("click",function(){return t(C(this).data("device")),!1}),C("#filter-tags a").on("click",function(){var a=C(this),t=a.closest("li"),e=a.data("tag");return t.hasClass("has-child")?t.toggleClass("dropdown"):(r=1,l(i=e,o=null,s),n(r)),!1}),C("#filter-search input").on("input",function(a){s=C(this).val(),r=1,l(i,o,s),n(r)}),C("#filter-years a").on("click",function(){var a=C(this),t=a.closest("li"),e=a.data("year");return t.hasClass("has-child")?t.toggleClass("dropdown"):(r=1,l(i=null,o=e,s),n(r)),!1}),C("body").on("click",function(){p()}),C("#products").on("click",function(a){C(a.target).is(C("#products"))&&c()}),C("#pagination").on("click","a",function(){var a=C(this).closest("li").data("page"),t=C("#product-list .row").length;return r=0<a?a:r,r="prev"==a?r-1:r,r="next"==a?r+1:r,n(r=Math.min(Math.max(r,1),t)),!1}),C("#product-list").on("click",".product",function(){var a=C(this);return C("#product-list .product.active").removeClass("active"),a.addClass("active"),p(),e(!0),c(),!1}),C("#iframe").on("load",function(a){setTimeout(function(){if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)){var a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);if([parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||0,10)][0]<13){C(".iframe-wrap").css({"-webkit-overflow-scrolling":"touch","overflow-y":"auto"}),C("#product-devices").css({display:"none"});var t=C("body").width();C("#iframe").attr("scrolling","no").removeClass("iframe").css({position:"absolute",top:0,left:0,"min-width":"100%","min-height":"100%"}).width(t)}}C("body").addClass("iframe-loaded")},1e3)}),d.enabled&&d.Adapter.bind(window,"statechange",function(){var a=d.getState();if(a.data&&a.data.product_id){var t=C("#product-list .product[data-product-id='"+a.data.product_id+"']");t.hasClass("active")||(C("#product-list .product.active").removeClass("active"),t.addClass("active"),e(!1))}}),l(i,o),n(r),t(a.responsiveDevice),C(".page-loader").length?setTimeout(function(){C("body").addClass("page-loaded"),e(!0)},3e3):(C("body").addClass("page-loaded"),e(!0))})}(jQuery);